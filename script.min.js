var Base=(function(){function a(b){this.pending=false;this.debug=false;if(b!==undefined){this.debug=(b)?true:false}}a.prototype.DisplayMessage=function(c,e){var d=this;var b;if(e===undefined){e=10000}if(d.pending!==false){clearTimeout(d.pending);d.pending=false;jQuery("#messages").empty()}b=i18n.__(c);if(b===undefined){b=c}jQuery("#messages").append(b);d.pending=setTimeout(function(){jQuery("#messages").empty()},e);return d};a.prototype.ChangePass=function(){var b=this;b.DisplayMessage("updatingpass",60000);jQuery.ajax({url:"update.php",data:{format:"json",user:jQuery("#username").val(),actual:jQuery("#actualpass").val(),new1:jQuery("#newpass1").val(),new2:jQuery("#newpass2").val(),lang:jQuery("html").attr("lang"),dbg:(b.debug)?1:0},type:"POST",cache:false,error:function(){b.DisplayMessage("unknownerror")},success:function(d){try{var c=jQuery.parseJSON(d);if(c.ok==1){jQuery("#actualpass").val("");jQuery("#newpass1").val("");jQuery("#newpass2").val("")}b.DisplayMessage(c.message)}catch(f){b.DisplayMessage("updateerror");if(b.debug){jQuery("body").empty().append(d)}}}})};a.prototype.Initialize=function(){var b=this;jQuery("#changepass").on("click",function(){b.ChangePass()});return b};return a})();jQuery(document).ready(function(){var a=["title","lusername","lactualpass","lnewpass1","lnewpass2","changepass"];jQuery(document).attr("title",i18n.__("headtitle"));jQuery("meta[name=description]").attr("content",i18n.__("description"));jQuery("#title").append(i18n.__("title"));jQuery("#copyright a").last().attr("href",i18n.__("licenseurl"));for(var b in a){jQuery("#"+a[b]).empty().append(i18n.__(a[b]))}new Base(false).Initialize().DisplayMessage("welcome",4000)});